# My NixOS Setup
This repo contains the configuration files for my personal multi-user and multi-pc NixOS setup

![desktop](./src/desktop.png)

## Programs
| Type                | Program                     |
| :------------------ | :-------------------------: |
| Editor              | [gEdit](https://neovim.io/) |
| Shell               | [ZSH](https://www.zsh.org/) |
| Terminal            | [GNOME Terminal](https://gitlab.gnome.org/GNOME/gnome-terminal) |
| Desktop Environment | [GNOME](https://www.gnome.org/) |

## Structure

Here is an overview of the folders' structure:

```
├── setup.sh
├── configuration.nix
├── profiles.nix
├── volatile
│   ├── repos
│   ├── path
│   └── profiles.nix
├── overlays
├── secrets
├── users
│   ├── v7
│   │   ├── config
│   │   ├── modules
│   │   └── overlays
│   ├── navya
│   │   ├── config
│   │   └── modules
│   └── root
└── modules
    ├── devices
    │   ├── vortex
    │   │   ├── hardware.nix
    │   │   ├── services.nix
    │   │   └── packages.nix
    │   └── futura
    │       ├── hardware.nix
    │       └── packages.nix
    ├── boot.nix
    ├── gui.nix
    ├── partitions.nix
    ├── packages.nix
    ├── profiles.nix
    └── programs.nix
```

- `setup.sh`: initial setup and installation script
- `configuration.nix`: main system derivation file
- `profiles.nix`: auto-generated by the setup script
- `volatile`: directory containing variable configuration
- `path`: path to custom `/etc/nixos`
- `users`: user related configuration and dotfiles
- `repos`: management and versioning for repos
- `modules`: modulated configuration for easier management
- `overlays`: locally built package overrides

## Install
Install NixOS using the following commands:  
*(Please note that the partition label along with the esp and boot flags must be set on the ESP)*
<pre><code>mkfs.ext4 -L System <i>/path/to/root</i>
mkswap -L swap <i>/path/to/swap</i>
mkfs.fat -F 32 -n boot <i>/path/to/esp</i>
mount /dev/disk/by-label/System /mnt
mkdir -p /mnt/boot/efi
mount /dev/disk/by-partlabel/boot /mnt/boot/efi
nixos-generate-config --root /mnt
nixos-install
</code></pre>

After rebooting, run the following commands:
<pre><code>mkdir temp && cd temp
git clone https://github.com/maydayv7/nixos-config.git && cd nixos-config
git-crypt unlock <i>/path/to/key</i>
chmod +x setup.sh && ./setup.sh
</code></pre>